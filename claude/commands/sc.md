---
description: |
  `/sc` は自然言語の要望を SuperClaude スラッシュコマンドに変換する AI 駆動カスタムコマンドです。
  Claude Code は入力文章を解析し、適切なコマンド・フラグ・ペルソナを自動判定して最適な組み合わせを出力します。
---

# 指令

1. **入力**
   `/sc <要望>` 形式で与えられる日本語のタスク文（例: `/sc hogeを実装したいです。`）。

2. **出力**
   - 先頭に対応する SuperClaude コマンド（`/implement` など）を置き、半角スペース区切りで引数を続ける。
   - 引数が複数語の場合はダブルクォート (`"…"`) で括る。
   - **文脈から自動判定したフラグを必ず付与**（例: `--persona-frontend --quick`）
   - **コマンド行のみ** を返し、解説や余分な文章は一切付けない。
   - 不確実な場合は `/analyze "<要望>"` を出力する。

# コマンド選択ガイド

## 基本コマンド

| コマンド        | 主な用途                  | 日本語キーワード例                   | 自動判定ペルソナ          |
| --------------- | ------------------------- | ------------------------------------ | ------------------------- |
| `/implement`    | 新機能やコードの実装      | 実装, 作成, 追加, 開発               | 文脈により自動選択        |
| `/build`        | ビルド・パッケージング    | ビルド, コンパイル, パッケージ       | backend または architect  |
| `/design`       | 設計・UI/UX デザイン      | 設計, デザイン, 画面, アーキテクチャ | architect または frontend |
| `/analyze`      | 調査・原因分析            | 分析, 解析, 調査                     | analyzer                  |
| `/troubleshoot` | バグ調査・デバッグ        | デバッグ, バグ, 不具合, 障害         | analyzer                  |
| `/explain`      | コードや概念の説明        | 説明, 解説                           | mentor                    |
| `/improve`      | リファクタ・性能改善      | 改善, 最適化, リファクタ             | 文脈により自動選択        |
| `/test`         | テスト作成・実行          | テスト, 単体テスト, E2E              | qa                        |
| `/cleanup`      | 不要コード削除・整理      | クリーンアップ, 整理, 削除           | refactor                  |
| `/document`     | ドキュメント生成          | ドキュメント, README, 仕様書         | mentor                    |
| `/git`          | Git 操作・コミット        | git, コミット, プルリク              | analyzer                  |
| `/estimate`     | 工数・期間見積もり        | 見積もり, 工数, 期間                 | architect                 |
| `/task`         | タスク管理                | タスク, TODO, 進捗                   | mentor                    |
| `/index`        | インデックス作成          | インデックス, 索引                   | analyzer                  |
| `/load`         | データ/モジュール読み込み | ロード, 読み込み                     | backend                   |
| `/spawn`        | 新しいプロセス/環境生成   | 生成, スポーン, インスタンス         | backend                   |

## 自動判定システム

### ペルソナ自動判定ルール

要望の文脈から以下のペルソナが **自動的に** 選択されます：

| ペルソナ                | 自動判定キーワード                                   |
| ----------------------- | ---------------------------------------------------- |
| `--persona-architect`   | 設計, アーキテクチャ, 構造, システム全体, 見積もり   |
| `--persona-frontend`    | UI, 画面, フロントエンド, コンポーネント, React, Vue |
| `--persona-backend`     | API, サーバー, バックエンド, データベース, 認証      |
| `--persona-security`    | セキュリティ, 脆弱性, 認証, 暗号化, 権限             |
| `--persona-analyzer`    | 分析, 調査, デバッグ, 原因, 問題解決                 |
| `--persona-qa`          | テスト, 品質, 検証, バリデーション                   |
| `--persona-performance` | パフォーマンス, 最適化, 速度, メモリ                 |
| `--persona-refactor`    | リファクタ, 整理, クリーンアップ, コード改善         |
| `--persona-mentor`      | 説明, 解説, ドキュメント, 学習, 初心者向け           |

### 分析レベル自動判定ルール

要望の表現から以下のフラグが **自動的に** 選択されます：

| フラグ          | 自動判定キーワード               |
| --------------- | -------------------------------- |
| `--quick`       | 素早く, 簡単に, 概要, ざっくり   |
| `--code`        | 詳細に, しっかり, 深く, 徹底的に |
| `--performance` | パフォーマンス, 速度, 最適化     |
| `--security`    | セキュリティ, 安全性, 脆弱性     |

# 例（自動判定による出力）

## 基本パターン

| 入力                                       | 自動判定による出力                                |
| ------------------------------------------ | ------------------------------------------------- |
| `/sc 認証機能を実装したい`                 | `/implement "認証機能" --persona-backend`         |
| `/sc ビルドパイプラインを改善してください` | `/improve "ビルドパイプライン" --persona-backend` |
| `/sc バグを調査して原因を説明して`         | `/troubleshoot "バグ調査" --persona-analyzer`     |

## 高度な自動判定例

| 入力                                         | 自動判定による出力                                           |
| -------------------------------------------- | ------------------------------------------------------------ |
| `/sc フロントエンドのコードを素早くレビュー` | `/analyze "フロントエンドコード" --quick --persona-frontend` |
| `/sc セキュリティの観点でコード分析`         | `/analyze "コード" --security --persona-security`            |
| `/sc パフォーマンスを詳細に分析したい`       | `/analyze "パフォーマンス" --code --persona-performance`     |
| `/sc UI コンポーネントを作成`                | `/implement "UI コンポーネント" --persona-frontend`          |
| `/sc データベース設計を見直したい`           | `/design "データベース" --persona-architect`                 |
| `/sc 初心者向けにコードを解説して`           | `/explain "コード" --persona-mentor`                         |
| `/sc API のセキュリティを強化`               | `/improve "API セキュリティ" --security --persona-security`  |
| `/sc テストケース作成`                       | `/test "テストケース" --persona-qa`                          |
| `/sc コードを整理整頓したい`                 | `/cleanup "コード" --persona-refactor`                       |

## 複合的な判定例

| 入力                                                 | 自動判定による出力                                                        |
| ---------------------------------------------------- | ------------------------------------------------------------------------- |
| `/sc React コンポーネントのパフォーマンスを詳細分析` | `/analyze "React コンポーネント" --code --persona-frontend --performance` |
| `/sc バックエンド API の脆弱性を素早くチェック`      | `/analyze "バックエンド API" --quick --persona-security`                  |
| `/sc データベースアーキテクチャを包括的に設計`       | `/design "データベースアーキテクチャ" --code --persona-architect`         |

# 自動判定アルゴリズム

## 処理フロー

1. **キーワード抽出**: 入力文から技術的・意図的キーワードを抽出
2. **コマンド選択**: 主動詞と目的から最適なコマンドを判定
3. **ペルソナ判定**: 技術領域キーワードからペルソナを自動選択
4. **レベル判定**: 修飾表現から分析レベルフラグを自動選択
5. **複合判定**: 複数の専門性が検出された場合は主要なものを優先

## 判定優先順位

1. **明示的技術領域** (frontend, backend, security) → 対応ペルソナ
2. **作業の性質** (analyze, debug) → analyzer ペルソナ
3. **成果物の種類** (test, document) → qa, mentor ペルソナ
4. **作業レベル** (quick, detailed) → 対応レベルフラグ
5. **デフォルト**: 文脈が不明確な場合は analyzer ペルソナ

## 注意事項

- **必ずペルソナフラグを付与**: すべての出力に適切なペルソナフラグが自動で追加される
- **複数判定時の優先**: 複数の専門性が検出された場合、最も具体的なものを選択
- **レベルフラグは任意**: 明確な修飾表現がない場合は省略可能
- **出力形式**: `/コマンド "引数" --persona-XXX [--レベル]` の形式で必ず出力
- **1 行出力**: 解説や余分な文章は一切付けない
- **不確実時**: `/analyze "<要望>" --persona-analyzer` で対応

## 判定例外ケース

- **汎用的な要望**: 「システムを分析」→ `/analyze "システム" --persona-analyzer`
- **複合的な要望**: 最も重要な要素を判定して単一ペルソナを選択
- **曖昧な表現**: analyzer ペルソナをデフォルトとして使用
